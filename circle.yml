version: 2
executorType: docker

jobs:
  build:
    working_directory: ~/deploy
    docker:
      - image: docker:17
    steps:
      - checkout

      - type: setup-docker-engine

      - type: shell
        name: Build Docker image
        command: docker build -t hugoai/node:latest ./node

      - type: shell
        name: Upload Docker image
        command: docker push hugoai/node:latest